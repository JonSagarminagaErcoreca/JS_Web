<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles/global.css">
  <script defer src="./scripts/menu.js"></script>
      
</head>
<body data-page="liquido">
  <!-- BG de Unicorn -->
  <div id="us-bg" data-us-project="IsMdT1kRU5X0UR1VrDzM" data-us-fps="60" data-us-scale="1.0" data-us-logo="false"></div>
  <!-- menú oculto en esta página según solicitud -->
  <a class="container" href="./password.html" aria-label="Go to Work">
    <svg viewBox="0 0 400 800" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="liquidFilterSmooth">
          <feTurbulence id="turbulence" type="turbulence" baseFrequency="0.01" numOctaves="1" result="turbulence"/>
          <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="15" xChannelSelector="R" yChannelSelector="G"/>
        </filter>

        <clipPath id="liquidLevel">
          <path class="wave-clip" d="M0,0 Q100,0 200,0 T400,0 V800 H0 Z" />
        </clipPath>

        <mask id="liquidMask">
          <path class="mask-path" d="M332.35,7.41c1.04-4.52-.52-7.01-6.02-6.91-38.89,1.04-77.41,4.05-113.97,18.8-39.93,16.15-72.43,41.07-90.6,81.2-11.01,24.3-12.46,50.52-12.46,76.84.05,75.7,0,151.45,0,227.15,0,80.89-.16,161.84.26,242.73.05,8.62-2.96,11.68-10.59,13.66-29.54,7.74-59.6,11.06-90.08,10.33-8.57-.21-8.1,4-8.36,9.97-.26,6.44,1.19,9.09,8.41,8.83,29.39-1.09,58.72-2.54,87.38-9.76,33.7-8.46,64.54-22.38,88.73-48.39,29.96-32.29,41.95-71.91,42.21-114.48.88-152.7.47-305.45.52-458.2,0-28.3.05-27.93,27.78-33.7,23.57-4.88,47.4-6.07,71.29-6.96,9.55-.31,4.62-7.06,5.5-11.11M204.68,54.55c-.05,149.79-.05,299.58-.31,449.37,0,22.12-3.12,43.92-11.21,64.85,0-18.85-.26-37.75.05-56.65,1.71-96.73.47-193.4.67-290.13.1-54-.47-108.05-1.25-162.04-.16-8.83,3.32-12.82,12.05-15.26v9.86Z" />
        </mask>
      </defs>

      <g clip-path="url(#liquidLevel)" mask="url(#liquidMask)">
        <path class="fill fill1" d="M0,250 Q100,200 200,250 T400,250 V800 H0 Z"/>
        <path class="fill fill2" d="M0,300 Q100,350 200,300 T400,250 V800 H0 Z"/>
        <path class="fill fill3" d="M0,350 Q100,290 200,350 T400,350 V800 H0 Z"/>
      </g>

      <path class="outline" d="M332.35,7.41c1.04-4.52-.52-7.01-6.02-6.91-38.89,1.04-77.41,4.05-113.97,18.8-39.93,16.15-72.43,41.07-90.6,81.2-11.01,24.3-12.46,50.52-12.46,76.84.05,75.7,0,151.45,0,227.15,0,80.89-.16,161.84.26,242.73.05,8.62-2.96,11.68-10.59,13.66-29.54,7.74-59.6,11.06-90.08,10.33-8.57-.21-8.1,4-8.36,9.97-.26,6.44,1.19,9.09,8.41,8.83,29.39-1.09,58.72-2.54,87.38-9.76,33.7-8.46,64.54-22.38,88.73-48.39,29.96-32.29,41.95-71.91,42.21-114.48.88-152.7.47-305.45.52-458.2,0-28.3.05-27.93,27.78-33.7,23.57-4.88,47.4-6.07,71.29-6.96,9.55-.31,4.62-7.06,5.5-11.11M204.68,54.55c-.05,149.79-.05,299.58-.31,449.37,0,22.12-3.12,43.92-11.21,64.85,0-18.85-.26-37.75 .05-56.65,1.71-96.73.47-193.4.67-290.13.1-54-.47-108.05-1.25-162.04-.16-8.83,3.32-12.82,12.05-15.26v9.86Z" />
    </svg>
  </a>

  <!-- Botón Colorize fijo -->
  <button id="colorizeBtn" class="colorize-button">
    Colorize
  </button>

  <style>
    .colorize-button {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10001; /* Por encima del badge de Unicorn */
      
      padding: 13px 60px;
      border: none;
      border-radius: 12px;
      
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      
      color: var(--outline-color, #000000);
      font-family: 'Montserrat Alternates', system-ui, sans-serif;
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.02em;
      
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
      
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    .colorize-button:hover {
      transform: translateX(-50%) translateY(-2px);
      background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      scale: 1.05;
    }
    
    .colorize-button:active {
      transform: translateX(-50%) translateY(0px);
      scale: 0.98;
    }
  </style>

  <script>
    // Menú overlay compacto
    (function(){
      const toggle = document.getElementById('menuToggle');
      const overlay = document.getElementById('menuOverlay');
      const panel = document.getElementById('menuPanel');
      const bar = document.querySelector('.menu-bar');
      if (!toggle || !overlay) return;
      const setOpen = (open) => {
        overlay.classList.toggle('open', open);
        overlay.setAttribute('aria-hidden', String(!open));
        document.body.style.overflow = open ? 'hidden' : '';
      };
      const positionPanel = () => { if (!bar || !panel) return; const rect = bar.getBoundingClientRect(); panel.style.top = (rect.bottom + 24) + 'px'; };
      toggle.addEventListener('click', () => { const o = !overlay.classList.contains('open'); setOpen(o); toggle.classList.toggle('open', o); if (o) positionPanel(); });
      overlay.addEventListener('click', (e)=>{ if (e.target === overlay) setOpen(false); });
      overlay.querySelectorAll('a').forEach(a => a.addEventListener('click', ()=> setOpen(false)));
      window.addEventListener('resize', () => { if (overlay.classList.contains('open')) positionPanel(); });
    })();

    const turbulence = document.getElementById('turbulence');
    const container = document.querySelector('.container');
    const waves = document.querySelectorAll('.fill');

    const cursors = Array.from({ length: 12 }, (_, i) => `assets/cursors/cursor${i + 1}.png`);

    let lastOutlineColor = '#000000';
    let lastBackgroundColor = '#ffffff';

    function randomColor(opacity) {
      const r = Math.floor(Math.random() * 256);
      const g = Math.floor(Math.random() * 256);
      const b = Math.floor(Math.random() * 256);
      return {
        full: `rgba(${r}, ${g}, ${b}, ${opacity})`,
        desaturated: `rgba(${Math.floor((r + 255 * 2) / 3)}, ${Math.floor((g + 255 * 2) / 3)}, ${Math.floor((b + 255 * 2) / 3)}, 1)`
      };
    }

    function setColors() {
      const c1 = randomColor(0.4);
      const c2 = randomColor(0.35);
      const c3 = randomColor(0.3);
      const outline = randomColor(1);

      lastOutlineColor = outline.full;
      lastBackgroundColor = c1.desaturated;

      const colorScheme = {
        liquidColor1: c1.full,
        liquidColor2: c2.full,
        liquidColor3: c3.full,
        backgroundColor: c1.desaturated,
        outlineColor: outline.full
      };

      // Guardar en localStorage
      localStorage.setItem('liquidColorScheme', JSON.stringify(colorScheme));

      // Aplicar colores
      document.documentElement.style.setProperty('--liquid-color-1', c1.full);
      document.documentElement.style.setProperty('--liquid-color-2', c2.full);
      document.documentElement.style.setProperty('--liquid-color-3', c3.full);
      document.documentElement.style.setProperty('--background-color', c1.desaturated);
      document.documentElement.style.setProperty('--outline-color', outline.full);
    }

    function loadSavedColors() {
      const saved = localStorage.getItem('liquidColorScheme');
      if (saved) {
        try {
          const colorScheme = JSON.parse(saved);
          
          lastOutlineColor = colorScheme.outlineColor;
          lastBackgroundColor = colorScheme.backgroundColor;

          document.documentElement.style.setProperty('--liquid-color-1', colorScheme.liquidColor1);
          document.documentElement.style.setProperty('--liquid-color-2', colorScheme.liquidColor2);
          document.documentElement.style.setProperty('--liquid-color-3', colorScheme.liquidColor3);
          document.documentElement.style.setProperty('--background-color', colorScheme.backgroundColor);
          document.documentElement.style.setProperty('--outline-color', colorScheme.outlineColor);
        } catch (e) {
          console.warn('Error loading saved color scheme:', e);
        }
      }
    }

    function setRandomCursor() {
      const random = cursors[Math.floor(Math.random() * cursors.length)];
      const cursorImg = new Image();
      cursorImg.src = random;
      cursorImg.classList.add('cursor-rotating');
      cursorImg.style.position = 'fixed';        // antes: absolute
      cursorImg.style.zIndex = '10000';          // NUEVO: por encima del SVG
      cursorImg.style.pointerEvents = 'none';
      cursorImg.style.width = '64px';
      cursorImg.style.height = '64px';
      document.body.appendChild(cursorImg);

      const moveCursor = (e) => {
        cursorImg.style.left = (e.clientX - 32) + 'px';
        cursorImg.style.top  = (e.clientY - 32) + 'px';
      };
      document.addEventListener('mousemove', moveCursor);

      container.addEventListener('mouseleave', () => {
        document.body.removeChild(cursorImg);
        document.removeEventListener('mousemove', moveCursor);
      }, { once: true });
    }


    container.addEventListener('mousemove', (e) => {
      const { width, height, left, top } = container.getBoundingClientRect();
      const x = (e.clientX - left) / width - 0.5;
      const y = (e.clientY - top) / height - 0.5;
      const freq = 0.01 + Math.abs(x + y) * 0.25;
      if (turbulence) turbulence.setAttribute('baseFrequency', freq);

      const moveX = x * 50;
      const moveY = y * 50;
      const fillHeight = 400 - y * 900;

      waves[0].setAttribute('d', `M0,${fillHeight - 50} Q100,${fillHeight - 100} 200,${fillHeight - 50} T400,${fillHeight - 50} V800 H0 Z`);
      waves[1].setAttribute('d', `M0,${fillHeight} Q100,${fillHeight + 50} 200,${fillHeight} T400,${fillHeight} V800 H0 Z`);
      waves[2].setAttribute('d', `M0,${fillHeight + 50} Q100,${fillHeight - 60} 200,${fillHeight + 50} T400,${fillHeight + 50} V800 H0 Z`);

      waves.forEach((wave, index) => {
        wave.setAttribute('transform', `translate(${moveX * (index + 1) * 0.5}, ${moveY * (index + 1) * 0.5})`);
      });
    });

    container.addEventListener('mouseleave', () => {
      if (turbulence) turbulence.setAttribute('baseFrequency', 0.01);
      waves.forEach(wave => {
        wave.setAttribute('transform', `translate(0, 0)`);
      });
      document.documentElement.style.setProperty('--background-color', lastBackgroundColor);
      document.documentElement.style.setProperty('--outline-color', lastOutlineColor);
    });

    container.addEventListener('mouseenter', () => {
      setColors();
      setRandomCursor();
    });

    // Conectar botón Colorize
    document.getElementById('colorizeBtn').addEventListener('click', () => {
      setColors();
    });

    // Cargar colores guardados al inicializar
    loadSavedColors();
  </script>
  <script type="text/javascript">
    !function(){
      if(!window.UnicornStudio){
        window.UnicornStudio={isInitialized:!1};
        var i=document.createElement("script");
        i.src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.31/dist/unicornStudio.umd.js";
        i.onload=function(){
          if(!window.UnicornStudio.isInitialized){
            UnicornStudio.init();
            window.UnicornStudio.isInitialized=!0;
          }
        };
        (document.head||document.body).appendChild(i);
      }
    }();
    </script>
</body>
</html>

